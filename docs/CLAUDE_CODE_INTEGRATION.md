# Claude Code Integration Guide

This guide provides comprehensive instructions for integrating the Neo4j MCP server with Claude Code across different platforms and use cases.

## 🚀 Quick Setup Guide

### Step 1: Install Neo4j MCP Server

```bash
# Clone and install the server
git clone https://github.com/your-username/neo4j_mcp.git
cd neo4j_mcp
pip install -r requirements.txt
pip install -e .
```

### Step 2: Configure Claude Code

Add the following to your Claude Code MCP servers configuration:

```json
{
  "mcpServers": {
    "neo4j": {
      "command": "python",
      "args": ["-m", "neo4j_mcp.server"],
      "cwd": "/path/to/neo4j_mcp",
      "env": {
        "NEO4J_URI": "neo4j://localhost:7687",
        "NEO4J_USER": "neo4j",
        "NEO4J_PASSWORD": "your-password",
        "NEO4J_DATABASE": "neo4j"
      }
    }
  }
}\n```\n\n### Step 3: Restart Claude Code\n\nRestart Claude Code to load the new MCP server configuration.\n\n### Step 4: Test Integration\n\nIn Claude Code, try:\n```\n\"Check my Neo4j server status\"\n```\n\n---\n\n## 🛠️ Platform-Specific Configuration\n\n### Windows Configuration\n\n```json\n{\n  \"mcpServers\": {\n    \"neo4j\": {\n      \"command\": \"C:\\\\Python39\\\\python.exe\",\n      \"args\": [\"-m\", \"neo4j_mcp.server\"],\n      \"cwd\": \"C:\\\\Users\\\\YourName\\\\neo4j_mcp\",\n      \"env\": {\n        \"NEO4J_URI\": \"neo4j://localhost:7687\",\n        \"NEO4J_USER\": \"neo4j\",\n        \"NEO4J_PASSWORD\": \"password\",\n        \"NEO4J_DATABASE\": \"neo4j\"\n      }\n    }\n  }\n}\n```\n\n**Windows Tips**:\n- Use full path to Python executable\n- Use double backslashes in Windows paths\n- Ensure Neo4j Desktop is running\n\n### macOS Configuration\n\n```json\n{\n  \"mcpServers\": {\n    \"neo4j\": {\n      \"command\": \"/usr/local/bin/python3\",\n      \"args\": [\"-m\", \"neo4j_mcp.server\"],\n      \"cwd\": \"/Users/YourName/neo4j_mcp\",\n      \"env\": {\n        \"NEO4J_URI\": \"neo4j://localhost:7687\",\n        \"NEO4J_USER\": \"neo4j\",\n        \"NEO4J_PASSWORD\": \"password\",\n        \"NEO4J_DATABASE\": \"neo4j\"\n      }\n    }\n  }\n}\n```\n\n**macOS Tips**:\n- Use `python3` command\n- Check Python path with `which python3`\n- Install Neo4j via Homebrew or Neo4j Desktop\n\n### Linux Configuration\n\n```json\n{\n  \"mcpServers\": {\n    \"neo4j\": {\n      \"command\": \"/usr/bin/python3\",\n      \"args\": [\"-m\", \"neo4j_mcp.server\"],\n      \"cwd\": \"/home/username/neo4j_mcp\",\n      \"env\": {\n        \"NEO4J_URI\": \"neo4j://localhost:7687\",\n        \"NEO4J_USER\": \"neo4j\",\n        \"NEO4J_PASSWORD\": \"password\",\n        \"NEO4J_DATABASE\": \"neo4j\"\n      }\n    }\n  }\n}\n```\n\n**Linux Tips**:\n- Use system Python or virtual environment\n- Consider running Neo4j in Docker\n- Check firewall settings for port 7687\n\n### WSL Configuration\n\n```json\n{\n  \"mcpServers\": {\n    \"neo4j\": {\n      \"command\": \"/usr/bin/python3\",\n      \"args\": [\"-m\", \"neo4j_mcp.server\"],\n      \"cwd\": \"/mnt/c/Users/YourName/neo4j_mcp\",\n      \"env\": {\n        \"NEO4J_URI\": \"neo4j://127.0.0.1:7687\",\n        \"NEO4J_USER\": \"neo4j\",\n        \"NEO4J_PASSWORD\": \"password\",\n        \"NEO4J_DATABASE\": \"neo4j\"\n      }\n    }\n  }\n}\n```\n\n**WSL Special Features**:\n- Automatic Windows host IP detection\n- Smart connection fallback\n- Cross-platform file system support\n\n---\n\n## ⚙️ Advanced Configuration Options\n\n### Using Environment Files\n\nInstead of embedding credentials in JSON:\n\n1. **Create `.env` file** in project directory:\n   ```bash\n   NEO4J_URI=neo4j://localhost:7687\n   NEO4J_USER=neo4j\n   NEO4J_PASSWORD=your-secure-password\n   NEO4J_DATABASE=neo4j\n   ```\n\n2. **Simplified Claude Code configuration**:\n   ```json\n   {\n     \"mcpServers\": {\n       \"neo4j\": {\n         \"command\": \"python\",\n         \"args\": [\"-m\", \"neo4j_mcp.server\"],\n         \"cwd\": \"/path/to/neo4j_mcp\"\n       }\n     }\n   }\n   ```\n\n### Tool Management\n\nControl which tools are available:\n\n```json\n{\n  \"mcpServers\": {\n    \"neo4j\": {\n      \"command\": \"python\",\n      \"args\": [\"-m\", \"neo4j_mcp.server\"],\n      \"cwd\": \"/path/to/neo4j_mcp\",\n      \"env\": {\n        \"NEO4J_URI\": \"neo4j://localhost:7687\",\n        \"NEO4J_USER\": \"neo4j\",\n        \"NEO4J_PASSWORD\": \"password\",\n        \"NEO4J_ENABLE_WRITE\": \"false\",\n        \"NEO4J_ENABLE_SCHEMA\": \"true\"\n      }\n    }\n  }\n}\n```\n\n**Tool Control Options**:\n- `NEO4J_ENABLE_SCHEMA=false` - Disable schema introspection\n- `NEO4J_ENABLE_READ=false` - Disable read queries\n- `NEO4J_ENABLE_WRITE=false` - Disable write operations\n\n### Mock Mode for Testing\n\n```json\n{\n  \"mcpServers\": {\n    \"neo4j\": {\n      \"command\": \"python\",\n      \"args\": [\"-m\", \"neo4j_mcp.server\"],\n      \"cwd\": \"/path/to/neo4j_mcp\",\n      \"env\": {\n        \"NEO4J_MOCK\": \"true\"\n      }\n    }\n  }\n}\n```\n\n**Mock Mode Features**:\n- No Neo4j database required\n- Returns sample data\n- Perfect for testing integration\n- Useful for development environments\n\n---\n\n## 💬 Example Claude Code Conversations\n\n### Schema Exploration\n\n```\nYou: \"What's the schema of my Neo4j database?\"\n\nClaude: [Shows complete database schema with]\n- Node labels (Person, Company, Product)\n- Relationship types (WORKS_FOR, PURCHASED, LOCATED_IN)\n- Node counts by label\n- Basic schema structure\n\nYou: \"How many Person nodes are there?\"\n\nClaude: Based on the schema information, there are 1,247 Person nodes in your database.\n```\n\n### Data Querying\n\n```\nYou: \"Show me 5 people and their companies\"\n\nClaude: I'll query your Neo4j database to find people and their associated companies.\n\n[Executes: MATCH (p:Person)-[:WORKS_FOR]->(c:Company) RETURN p.name, c.name LIMIT 5]\n\nResults:\n1. John Smith → Tech Corp\n2. Jane Doe → Innovation Ltd\n3. Mike Johnson → StartupXYZ\n4. Sarah Wilson → Global Industries\n5. David Brown → Local Business\n```\n\n### Data Analysis\n\n```\nYou: \"Find the most connected person in the network\"\n\nClaude: I'll analyze the network to find the person with the most relationships.\n\n[Executes complex Cypher query with relationship counting]\n\nThe most connected person is \"Alice Cooper\" with 23 total relationships:\n- Works for: MegaCorp\n- Knows: 15 people\n- Lives in: New York\n- Owns: 3 products\n- Member of: 4 organizations\n```\n\n### Data Modification\n\n```\nYou: \"Create a new person named Emma Thompson, age 28, working at DataCorp\"\n\nClaude: I'll create the new person and establish the work relationship.\n\n[Executes CREATE and MERGE operations]\n\nSuccessfully created:\n- 1 Person node (Emma Thompson, age 28)\n- 1 WORKS_FOR relationship to DataCorp\n- DataCorp company node (created if didn't exist)\n\nTransaction completed in 45ms.\n```\n\n### Runtime Configuration\n\n```\nYou: \"Check my Neo4j server status\"\n\nClaude: # Neo4j MCP Server Configuration Status\n\n## Connection Settings\n- URI: neo4j://localhost:7687\n- User: neo4j\n- Database: neo4j\n\n## Tool Status\n- Schema Tool (get_neo4j_schema): [ENABLED]\n- Read Tool (read_neo4j_cypher): [ENABLED] \n- Write Tool (write_neo4j_cypher): [ENABLED]\n\nYou: \"Disable write operations for safety\"\n\nClaude: [DISABLED] Write tool disabled - write_neo4j_cypher is no longer available\n\nYou: \"What tools are available now?\"\n\nClaude: # Available Neo4j Tools\n- [ENABLED] get_neo4j_schema\n- [ENABLED] read_neo4j_cypher\n- [DISABLED] write_neo4j_cypher\n```\n\n---\n\n## 🔧 Troubleshooting Integration Issues\n\n### Common Problems and Solutions\n\n#### 1. \"MCP Server Not Starting\"\n\n**Symptoms**: Claude Code shows connection errors\n\n**Solutions**:\n```bash\n# Check Python installation\npython --version\npython -c \"import neo4j_mcp; print('Package OK')\"\n\n# Test server manually\npython -m neo4j_mcp.server --help\n\n# Check working directory\nls /path/to/neo4j_mcp\n```\n\n**Fix configuration**:\n- Verify Python path is correct\n- Ensure working directory exists\n- Check file permissions\n\n#### 2. \"Connection to Neo4j Failed\"\n\n**Symptoms**: Server starts but can't connect to Neo4j\n\n**Solutions**:\n```bash\n# Test Neo4j connectivity\ncypher-shell -a neo4j://localhost:7687 -u neo4j -p password \"RETURN 1\"\n\n# Check Neo4j status\n# Windows: Check Neo4j Desktop\n# Linux: systemctl status neo4j\n# macOS: brew services list | grep neo4j\n```\n\n**Fix configuration**:\n- Verify Neo4j is running\n- Check URI, username, and password\n- Test with Neo4j Browser first\n\n#### 3. \"Tools Not Appearing\"\n\n**Symptoms**: Server connects but tools aren't available\n\n**Solutions**:\n```bash\n# Check MCP server logs\n# Look in ~/.cache/claude-cli-nodejs/*/mcp-logs-*/\n\n# Test with runtime configuration\n\"Check Neo4j server status\"\n```\n\n**Fix configuration**:\n- Restart Claude Code\n- Check environment variables\n- Verify JSON syntax\n\n#### 4. \"Permission Errors\"\n\n**Symptoms**: Access denied or authentication failures\n\n**Solutions**:\n- Verify Neo4j user has correct permissions\n- Check database name is correct\n- Test authentication separately\n\n#### 5. \"WSL Connection Issues\"\n\n**Symptoms**: WSL can't connect to Windows Neo4j\n\n**Solutions**:\n```bash\n# Check Windows host IP detection\npython3 -c \"from neo4j_mcp.config import Neo4jConfig; print(Neo4jConfig().get_windows_host_ip())\"\n\n# Test direct connection\ntelnet $(python3 -c \"from neo4j_mcp.config import Neo4jConfig; print(Neo4jConfig().get_windows_host_ip())\") 7687\n```\n\n**Fix Windows configuration**:\n- Configure Neo4j to listen on 0.0.0.0\n- Open Windows Firewall for port 7687\n- Restart Neo4j after configuration changes\n\n---\n\n## 📋 Configuration Templates\n\n### Development Environment\n\n```json\n{\n  \"mcpServers\": {\n    \"neo4j-dev\": {\n      \"command\": \"python\",\n      \"args\": [\"-m\", \"neo4j_mcp.server\"],\n      \"cwd\": \"/path/to/neo4j_mcp\",\n      \"env\": {\n        \"NEO4J_URI\": \"neo4j://localhost:7687\",\n        \"NEO4J_USER\": \"neo4j\",\n        \"NEO4J_PASSWORD\": \"dev-password\",\n        \"NEO4J_DATABASE\": \"development\"\n      }\n    }\n  }\n}\n```\n\n### Production Environment (Read-Only)\n\n```json\n{\n  \"mcpServers\": {\n    \"neo4j-prod\": {\n      \"command\": \"python\",\n      \"args\": [\"-m\", \"neo4j_mcp.server\"],\n      \"cwd\": \"/opt/neo4j_mcp\",\n      \"env\": {\n        \"NEO4J_URI\": \"neo4j+s://prod.databases.neo4j.io\",\n        \"NEO4J_USER\": \"readonly-user\",\n        \"NEO4J_PASSWORD\": \"secure-password\",\n        \"NEO4J_DATABASE\": \"production\",\n        \"NEO4J_ENABLE_WRITE\": \"false\"\n      }\n    }\n  }\n}\n```\n\n### Testing Environment (Mock)\n\n```json\n{\n  \"mcpServers\": {\n    \"neo4j-test\": {\n      \"command\": \"python\",\n      \"args\": [\"-m\", \"neo4j_mcp.server\"],\n      \"cwd\": \"/path/to/neo4j_mcp\",\n      \"env\": {\n        \"NEO4J_MOCK\": \"true\"\n      }\n    }\n  }\n}\n```\n\n---\n\n## 🚀 Performance Optimization\n\n### Connection Optimization\n\n```json\n{\n  \"mcpServers\": {\n    \"neo4j\": {\n      \"command\": \"python\",\n      \"args\": [\"-m\", \"neo4j_mcp.server\"],\n      \"cwd\": \"/path/to/neo4j_mcp\",\n      \"env\": {\n        \"NEO4J_URI\": \"neo4j://localhost:7687\",\n        \"NEO4J_USER\": \"neo4j\",\n        \"NEO4J_PASSWORD\": \"password\",\n        \"NEO4J_CONNECTION_TIMEOUT\": \"30\",\n        \"NEO4J_POOL_SIZE\": \"10\"\n      }\n    }\n  }\n}\n```\n\n### Query Performance Tips\n\n1. **Use specific queries**: Instead of `\"show me everything\"`, use `\"show me the top 10 products by sales\"`\n\n2. **Leverage indexes**: Create indexes on frequently queried properties\n\n3. **Limit results**: Large result sets are automatically limited, but be specific\n\n4. **Use parameters**: Parameterized queries are cached and perform better\n\n---\n\n## 🔐 Security Best Practices\n\n### Credential Management\n\n1. **Use environment files**:\n   ```bash\n   # .env file (add to .gitignore)\n   NEO4J_PASSWORD=your-secure-password\n   ```\n\n2. **Avoid hardcoded credentials**:\n   ```json\n   // DON'T do this\n   \"NEO4J_PASSWORD\": \"password123\"\n   \n   // DO this instead\n   \"NEO4J_PASSWORD\": \"${NEO4J_PASSWORD}\"\n   ```\n\n3. **Use read-only users** for analysis:\n   ```bash\n   # In Neo4j, create read-only user\n   CREATE USER analytics SET PASSWORD 'secure-password';\n   GRANT ROLE reader TO analytics;\n   ```\n\n### Network Security\n\n1. **Use encrypted connections**:\n   ```json\n   \"NEO4J_URI\": \"neo4j+s://your-instance.neo4j.io\"\n   ```\n\n2. **Limit tool access**:\n   ```json\n   \"NEO4J_ENABLE_WRITE\": \"false\"\n   ```\n\n3. **Monitor access**:\n   - Review MCP server logs regularly\n   - Monitor Neo4j query logs\n   - Set up alerts for unusual activity\n\n---\n\n## 📚 Additional Resources\n\n### Documentation Links\n- [Neo4j MCP Server README](../README.md)\n- [Platform-Specific Setup](PLATFORM_SETUP.md)\n- [Troubleshooting Guide](TROUBLESHOOTING.md)\n- [Usage Examples](EXAMPLES.md)\n\n### Neo4j Resources\n- [Neo4j Documentation](https://neo4j.com/docs/)\n- [Cypher Query Language](https://neo4j.com/docs/cypher-manual/current/)\n- [Neo4j Desktop](https://neo4j.com/download/)\n\n### MCP Resources\n- [Model Context Protocol Specification](https://spec.modelcontextprotocol.io/)\n- [Claude Code Documentation](https://docs.anthropic.com/claude/docs)\n\n---\n\n## 🎯 Quick Reference\n\n### Essential Commands\n\n```bash\n# Test package installation\npython -c \"import neo4j_mcp; print('OK')\"\n\n# Test server startup\npython -m neo4j_mcp.server --help\n\n# Test with mock data\nNEO4J_MOCK=true python -m neo4j_mcp.server\n\n# Check Claude Code logs\ntail -f ~/.cache/claude-cli-nodejs/*/mcp-logs-neo4j/*.txt\n```\n\n### Common Claude Code Phrases\n\n```\n# Server management\n\"Check Neo4j server status\"\n\"Disable Neo4j write operations\"\n\"Enable all Neo4j tools\"\n\n# Schema exploration\n\"Show me the Neo4j database schema\"\n\"What node types are in the database?\"\n\"List all relationship types\"\n\n# Data querying\n\"Find all Person nodes\"\n\"Show me recent transactions\"\n\"Count nodes by type\"\n\n# Data analysis\n\"Find the most connected nodes\"\n\"Analyze the graph structure\"\n\"Show me the shortest path between X and Y\"\n```\n\n---\n\n**Ready to integrate?** Follow the platform-specific setup above and start exploring your Neo4j data with Claude Code!"